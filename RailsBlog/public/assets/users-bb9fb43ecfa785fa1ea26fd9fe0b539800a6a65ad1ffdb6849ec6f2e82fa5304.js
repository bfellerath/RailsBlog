var apiToken=$("#api-token").val();$.ajaxSetup({headers:{token:apiToken}});var Post=Backbone.Model.extend({}),PostCollection=Backbone.Collection.extend({model:Post,url:"/api/posts"}),PostView=Backbone.View.extend({tagName:"div",className:"post",template:_.template($("#post-view").html()),render:function(){this.$el.empty();var e=this.template(this.model.toJSON()),t=$(e);this.$el.append(t)},events:{"click button.remove":"removePost"},removePost:function(){this.$el.remove(),this.model.destroy()}}),PostListView=Backbone.View.extend({initialize:function(){this.listenTo(this.collection,"add",this.render)},render:function(){this.$el.empty();for(var e,t=this.collection.models,o=0;o<t.length;o++)e=new PostView({model:t[o]}),e.render(),this.$el.append(e.$el)}}),allThePosts=new PostCollection,postsPainter=new PostListView({collection:allThePosts,el:$(".posts")});allThePosts.fetch(),$("form.new-post").on("submit",function(e){e.preventDefault();var t=$(this).find('textarea[name="post[name]"]').val();allThePosts.create({name:t})});